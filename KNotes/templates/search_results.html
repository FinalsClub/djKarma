{% load check_file_ownership %}
{% for result in results %}
<!-- if result is a File -->
{% if result.object.viewCount %}
<div class="file row-fluid">

  <div class="file icon"></div>

  <div class="file-title">
    <a href="/file/{{result.object.pk}}">{{ result.object.title }}</a>
  </div>

  <div class="file-description">
    {{ result.object.description }}
  </div>

  <div class="file-info-action row hide">
    <div class="file-info">
      <span class="user">Uploaded by <a href="#"><i class="icon-user"></i>{{result.object.owner.get_profile.getName }}</a></span>
      <span class="download"><a href="/file/{{result.object.pk}}"><i class="icon-paper-clip"></i>View file</a></span>
      {% if not result.object|ownedBy:user_pk %}
      <span class="karma-points">-10 points</span>
      <span class="views">{{result.object.viewCount}} Views
      </span></div>
      {% else %}
      <span class="karma-points">OWNED</span>
      <span class="views">{{result.object.viewCount}} Views
      </span></div>
      {% include "file-actions.html" with file=result.object %}
      {% endif %}

  </div> <!-- .file-info-action hide row -->
</div>
<!-- if result is a Course -->
{% elif result.object.academic_year %}
<div class="course inactive" data-toggle="collapse" data-target="#course-unique-1">
  <div class="folder icon">
    <img src="/static/img/icon-folder-inactive.png">
  </div>
  <div class="course-title">
    <a href="#">{{result.object.title}}</a>
    <div class="course-info">
      <span class="instructor">{{result.object.instructor.name}}</span> <i class="icon-paper-clip"></i><a href="#">{{ result.object.files.all|length}} notes</a>
      <!-- TODO: Determine how to mash in user data
      <span class="your-files">Your: <a href="#">Uploads (1)</a> <a href="#">Downloads (2)</a></span> -->
    </div>
  </div>
  <div class="upload">
    <a class="button" data-toggle="modal" href="#upload">Upload notes</a>
  </div>
  <div style="clear:both"></div>
</div>
<!-- if result is a School -->
{% elif result.object.name %}
<!-- TODO: Have Lingo make a proper school div-->
<div class="course inactive" data-toggle="collapse" data-target="#school-unique-1">
  <div class="folder icon">
    <img src="/static/img/icon-folder-inactive.png">
  </div>
  <div class="course-title">
    <a href="#">{{result.object.name}}</a>
    <div class="school-info">
      <span class="location">{{result.object.location}}</span> <i class="icon-paper-clip"></i><a href="#">{{ result.object.course_set.all|length}} Courses</a>
      <!-- TODO: Determine how to mash in user data
      <span class="your-files">Your: <a href="#">Uploads (1)</a> <a href="#">Downloads (2)</a></span>-->
    </div>
  </div>
  <div class="upload">
    <a class="button" data-toggle="modal" href="#upload">Upload notes</a>
  </div>
  <div style="clear:both"></div>
</div>
{% endif %}
{% endfor %}
{% if page.has_previous or page.has_next %}
<!-- Previous / Next page links -->
  <div>
    {% if page.has_previous %}<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>{% endif %}
    |
    {% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>{% endif %}
  </div>
{% endif %}